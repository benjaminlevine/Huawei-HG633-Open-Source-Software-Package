  <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
  
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta http-equiv="Content-Script-Type" content="text/javascript">
    <meta name="Keywords" content="FMPP, preprocessor, FreeMarker, template, templates, HTML, HTML template, HTML templates, text, macro, macros, text preprocessor, HTML preprocessor, static HTML, HTML generator, static HTML generator, Java, free, open source, open-source, settings, options, engine">
      <title>FMPP - Settings</title>
    <style type="text/css">
      P {font-family: Arial, sans-serif}
      UL {font-family: Arial, sans-serif}
      LI {font-family: Arial, sans-serif}
      TH {font-family: Arial, sans-serif}
      TD {font-family: Arial, sans-serif}
      H1 {font-family: Arial, sans-serif}
      H2 {font-family: Arial, sans-serif}
      H3 {font-family: Arial, sans-serif}
      H4 {font-family: Arial, sans-serif}
      A.toc{color: #0000CC; text-decoration:none}
      A.toc:hover{text-decoration: underline}
      A.toc:visited{color: #800080}
      A.s{color: #30D000}
      A.s:visited{color: #30D000}
      TT {font-size: 1em; font-family: "Courier New", monospace}
      CODE {font-size: 1em; font-family: "Courier New", monospace}
    </style>
  </head>

  <body background="img/background.png" bgcolor="#FFFFFF" text="#000000" style="font-family: Arial, sans-serif">
    <table border=0 cellspacing=0 cellpadding=0 width="100%">
      <tr>
          <td valign="middle" align="left">
	    <h1 style="font-family: Arial, sans-serif"><font color="#000000">Settings</font></h1>
        <td valign="middle" align="right">&nbsp;&nbsp;
        <td valign="middle" align="right">
&nbsp;<br>&nbsp;&nbsp;<a href="details.html"><img alt="Prev" src="img/prev.png" border="0" width="44" height="44"></a>&nbsp;&nbsp;<a href="configfile.html"><img alt="Next" src="img/next.png" border="0" width="44" height="44"></a>&nbsp;&nbsp;<a href="manual.html"><img alt="Contents" src="img/contents.png" border="0" width="44" height="44"></a>&nbsp;&nbsp;<a href="index.html"><img alt="Home" src="img/home.png" border="0" width="39" height="44"></a><br>&nbsp;  <tr><td colspan=3 height=1 bgcolor="#000000"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td colspan=3 height=1 bgcolor="#808080"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td colspan=3 height=1 bgcolor="#C0C0C0"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td colspan=3 height=1 bgcolor="#E0E0E0"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td colspan=3 height=1 bgcolor="#F0F0F0"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
    </table>

    <p><font color="#000000"><b>Page contents</b></font>
  <ul>
    <li><a href="#sect1" class=toc>Things you must know about settings</a></li>
    <li><a href="#sect4" class=toc>Directories</a></li>
    <li><a href="#sect5" class=toc>Source and output files</a></li>
    <li><a href="#sect6" class=toc>Text encoding issues</a></li>
    <li><a href="#processingMode" class=toc>Processing mode choosing</a></li>
    <li><a href="#sect8" class=toc>Header and footer choosing</a></li>
    <li><a href="#sect9" class=toc>Output file name deduction</a></li>
    <li><a href="#sect10" class=toc>Skipping unchanged files</a></li>
    <li><a href="#sect11" class=toc>Turn choosing</a></li>
    <li><a href="#data" class=toc>Data model building</a></li>
    <li><a href="#sect15" class=toc>Locale</a></li>
    <li><a href="#sect16" class=toc>Number format</a></li>
    <li><a href="#sect17" class=toc>Date/time issues</a></li>
    <li><a href="#sect18" class=toc>Handling errors</a></li>
    <li><a href="#sect19" class=toc>Expert mode</a></li>
    <li><a href="#sect20" class=toc>Case sensitive path comparison</a></li>
    <li><a href="#logging" class=toc>Logging</a></li>
    <li><a href="#sect22" class=toc>Showing the progress and other messages</a></li>
    <li><a href="#metaSettings" class=toc>Meta settings</a></li>
    <li><a href="#xml" class=toc>XML related settings</a></li>
    <li><a href="#sect29" class=toc>FreeMarker links (external includes)</a></li>
    <li><a href="#objectWrapping" class=toc>Object wrapping</a></li>
    <li><a href="#templateSyntax" class=toc>Template syntax</a></li>
  </ul>
        <p><b>Alphabetical index of keys:</b></p>
        <ul>
          <li><a href="#key_alwaysCreateDirectories" class=toc>alwaysCreateDirectories</a>
          <li><a href="#key_appendLogFile" class=toc>appendLogFile</a>
          <li><a href="#key_borders" class=toc>borders</a>
          <li><a href="#key_caseSensitive" class=toc>caseSensitive</a>
          <li><a href="#key_columns" class=toc>columns</a>
          <li><a href="#key_configurationBase" class=toc>configurationBase</a>
          <li><a href="#key_data" class=toc>data</a>
          <li><a href="#key_dataRoot" class=toc>dataRoot</a>
          <li><a href="#key_dateFormat" class=toc>dateFormat</a>
          <li><a href="#key_datetimeFormat" class=toc>datetimeFormat</a>
          <li><a href="#key_echoFormat" class=toc>echoFormat</a>
          <li><a href="#key_expert" class=toc>expert</a>
          <li><a href="#key_freemarkerLinks" class=toc>freemarkerLinks</a>
          <li><a href="#key_ignoreCvsFiles" class=toc>ignoreCvsFiles</a>
          <li><a href="#key_ignoreSvnFiles" class=toc>ignoreSvnFiles</a>
          <li><a href="#key_ignoreTemporaryFiles" class=toc>ignoreTemporaryFiles</a>
          <li><a href="#key_inheritConfiguration" class=toc>inheritConfiguration</a>
          <li><a href="#key_localData" class=toc>localData</a>
          <li><a href="#key_locale" class=toc>locale</a>
          <li><a href="#key_logFile" class=toc>logFile</a>
          <li><a href="#key_modes" class=toc>modes</a>
          <li><a href="#key_numberFormat" class=toc>numberFormat</a>
          <li><a href="#key_objectWrapper" class=toc>objectWrapper</a>
          <li><a href="#key_outputEncoding" class=toc>outputEncoding</a>
          <li><a href="#key_outputFile" class=toc>outputFile</a>
          <li><a href="#key_outputRoot" class=toc>outputRoot</a>
          <li><a href="#key_quiet" class=toc>quiet</a>
          <li><a href="#key_removeExtensions" class=toc>removeExtensions</a>
          <li><a href="#key_removePostfixes" class=toc>removePostfixes</a>
          <li><a href="#key_replaceExtensions" class=toc>replaceExtensions</a>
          <li><a href="#key_skipUnchanged" class=toc>skipUnchanged</a>
          <li><a href="#key_snip" class=toc>snip</a>
          <li><a href="#key_sourceEncoding" class=toc>sourceEncoding</a>
          <li><a href="#key_sourceRoot" class=toc>sourceRoot</a>
          <li><a href="#key_sources" class=toc>sources</a>
          <li><a href="#key_stopOnError" class=toc>stopOnError</a>
          <li><a href="#key_tagSyntax" class=toc>tagSyntax</a>
          <li><a href="#key_templateData" class=toc>templateData</a>
          <li><a href="#key_timeFormat" class=toc>timeFormat</a>
          <li><a href="#key_timeZone" class=toc>timeZone</a>
          <li><a href="#key_turns" class=toc>turns</a>
          <li><a href="#key_urlEscapingCharset" class=toc>urlEscapingCharset</a>
          <li><a href="#key_validateXml" class=toc>validateXml</a>
          <li><a href="#key_xmlCatalogFiles" class=toc>xmlCatalogFiles</a>
          <li><a href="#key_xmlCatalogPrefer" class=toc>xmlCatalogPrefer</a>
          <li><a href="#key_xmlRenderings" class=toc>xmlRenderings</a>
          <li><a href="#key_xpathEngine" class=toc>xpathEngine</a>
        </ul>
    <p>
    <table border=0 cellspacing=0 cellpadding=0 width="100%">
  <tr><td  height=1 bgcolor="#000000"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td  height=1 bgcolor="#808080"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td  height=1 bgcolor="#C0C0C0"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td  height=1 bgcolor="#E0E0E0"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td  height=1 bgcolor="#F0F0F0"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
    </table>
      
<a name="sect1"></a>
     <h2><font color="#000000">Things you must know about settings</font></h2>

<p>The basic definition of the "setting" term is <a href="overview.html#settings">here...</a>

<a name="sect2"></a>
     <h3><font color="#000000">The common characteristics of settings</font></h3>
  
  <p>The characteristics of a setting can be described with these attributes:
  <ul>
    <li><b>Name</b>: The name of the setting. This name is used in configuration files. Also, front-ends used to use this or similar name for the setting in their user interface.</li>
  
    <li><b>Type</b>: The type of the value, such as string, integer, boolean, sequence or hash. If you specify the values in a configuration file, then the TDD syntax clearly specifies what syntax to use for which types. For the front-end specific user interface, it depends on the concrete front-end how you face with types. But, if the front-end wants you to enter the value for a single setting as simple text, then you have to enter scalar values (string, integer and boolean) as is (without any TDD quotation), but you have to use TDD syntax for non-scalar types as sequences and hashes. For setting that are sequences, <a href="tdd.html#modes">sequence mode TDD</a> is used (i.e. no <code><font color="#017D01">[</font></code> and <code><font color="#017D01">]</font></code> needed), and for setting that are hashes hash mode TDD is used (i.e. no <code><font color="#017D01">{</font></code> and <code><font color="#017D01">}</font></code> needed).</li>
    
    <li><b>Default</b>: If the value of the setting was not set, the processing session will use this value. If the setting has no default value that doesn't mean that you are required to specify a value for it.</li>
  </ul>
  
  <p>Notes:</p>
  <ul>
    <li>Settings of type "string (path)" are <a href="overview.html#realPath">real paths.</a></li>
    <li>All settings are optional, unless explicitly noted otherwise.</li>
  </ul>
  

<a name="sect3"></a>
     <h3><font color="#000000">The merging of setting values</font></h3>
  
  <p>Setting values can be specified in multiple layers. For example, it is possible that a setting is specified in the configuration file, and then again with a command-line argument of the command-line tool.</p>

  <p>Setting layers has a priority order, for example, the setting layer defined by the command-line arguments has higher priority than the setting layer defined by the configuration file. When the value of the same setting is specified in two layers, then the value that comes from the layer with higher priority overrides the setting value comes from the lower layer. If the type of the setting is not map or sequence, then this simply means that the value from the higher layer will be used, and the other value will be totally hidden. But if the setting type is sequence or hash, then the sequence values will be merged:</p>
  <ul>
    <li><p>When sequences are merged, the two sequences are concatenated, and the sequence with the higher priority will start the new concatenated sequence.</p></li>
  
    <li><p>When hashes are merged, the union of the two hashes is constructed, and for clashing keys the values in the hash with higher priority will be used. The type of the value of the hash items is not considered when the merging happens, simply the item from the higher priority hash will be used in the resulting hash. Thus, hash merging is not "deep", becasue the value of clashing items with hash values are not merged. For example, if you merge <code><font color="#017D01">{x:{v:1}, y:2}</font></code> with <code><font color="#017D01">{x:{w:2}}</font></code>, then the result will be <code><font color="#017D01">{x:{w:2}, y:2}</font></code>, and not <code><font color="#017D01">{x:{v:1, w:2}, y:2}</font></code>.</p></li>
  </ul>

  <p>Logically, the rules described in this section can be applied for more than two layers of settings as well.</p>
  


<a name="sect4"></a>
     <h2><font color="#000000">Directories</font></h2>
<a name="key_sourceRoot"></a>
  <p>
    <i>Name:</i> <b>sourceRoot</b><br>
    <i>Type:</i> string (path)<br>
    <i>Default:</i> No default value<br>
<i>Command-line short name: </i><tt>S</tt><br>
<i>Ant task attribute name alternative: </i><tt>srcdir</tt><br>
  </p>
<a name="key_outputRoot"></a>
  <p>
    <i>Name:</i> <b>outputRoot</b><br>
    <i>Type:</i> string (path)<br>
    <i>Default:</i> No default value<br>
<i>Command-line short name: </i><tt>O</tt><br>
<i>Ant task attribute name alternative: </i><tt>destdir</tt><br>
  </p>
<a name="key_dataRoot"></a>
  <p>
    <i>Name:</i> <b>dataRoot</b><br>
    <i>Type:</i> string (path)<br>
    <i>Default:</i> the value of <code><font color="#20C000">sourceRoot</font></code><br>
  </p>
<a name="key_alwaysCreateDirectories"></a>
  <p>
    <i>Name:</i> <b>alwaysCreateDirectories</b><br>
    <i>Type:</i> boolean<br>
    <i>Default:</i> <code><font color="#017D01">false</font></code><br>
<i>Ant task attribute name alternative: </i><tt>alwaysCreateDirs</tt><br>
  </p>

<p>In the typical use case FMPP processes all files in the directory specified by <code><font color="#20C000">sourceRoot</font></code>, and writes the result into the directory specified by the <code><font color="#20C000">outputRoot</font></code> directory. These two root directories serve as the root directory of two virtual file system that stores the source files and the output files respectively. This means that all files that FMPP processes must be inside the source root directory, and it is guaranteed that all output file will be inside the output root directory (as far as you do not by-pass FMPP intentionally with custom extensions). You can't leave the roots by moving upward with <code><font color="#017D01">..</font></code>-s. Also, when you refer to files or directories in the templates as the parameters of predefined directives, absolute paths like <code><font color="#017D01">/example.html</font></code> are interpreted relatively to the source or output root directories (except if the parameter deals with data files).</p>

<p>Note that both the source root and the output root must be defined before starting a processing session, however, a front-end may chooses default values for them. Also, if you use the <code><a href="settings.html#key_outputFile" class=s><font color="#20C000">outputFile</font></a></code> setting, these two setting will have default value.</p>

<p>The directory specified by <code><font color="#20C000">dataRoot</font></code> is interesting for data loaders. If a data loader gets a relative path, then it should interpret that relatively to the data root directory. If it gets an absolute path, it should interpret that as is. As you can see from this, data root directory does not try to mimic a file system root, as the other two root directories. Data loaders can reach files outside the data root directory.</p>

<p>By default, the data root is the same as the source root. This encourages the practice where you store the data files in the, say, <code><font color="#017D01">data</font></code> subdirectory of the source root, and then mark that directory with a <code><font color="#017D01">ignoredir.fmpp</font></code> file (file content is irrelevant), so FMPP will not process the content of the directory. Thus, you keep all input together: data sources, templates and static files (as images).</p>

<p>By default, no empty subdirectories will be created in the output root directory. More precisely, directories are created only on demand, when actual output files have to be created in them, hence normally you don't have empty directories in the output. However, this behavior can be changed with <code><font color="#017D01">alwaysCreateDirectories</font></code>; with that setting set to <code><font color="#017D01">true</font></code>, each source directory will produce a corresponding output directory (unless it contains an <code><font color="#017D01">ignoredir.fmpp</font></code> file). Also, if a source directory contains a file named <code><font color="#017D01">createdir.fmpp</font></code> (file content is irrelevant) then the corresponding output directory will be created, regardless of the <code><font color="#017D01">alwaysCreateDirectories</font></code> setting (unless, again, <code><font color="#017D01">ignoredir.fmpp</font></code> is also present)</p>

<p>It is possible to tell FMPP to process only certain files and directories of the source root, not all of them; see the <code><a href="settings.html#key_sources" class=s><font color="#20C000">sources</font></a></code> setting.<p>


<a name="sect5"></a>
     <h2><font color="#000000">Source and output files</font></h2>
<a name="key_sources"></a>
  <p>
    <i>Name:</i> <b>sources</b><br>
    <i>Type:</i> sequence (of paths)<br>
    <i>Default:</i> No default value<br>
  </p>
<a name="key_outputFile"></a>
  <p>
    <i>Name:</i> <b>outputFile</b><br>
    <i>Type:</i> string (path)<br>
    <i>Default:</i> No default value<br>
<i>Command-line short name: </i><tt>o</tt><br>
  </p>

<p>Be default FMPP processes all files in the source root directory. But if you use the <code><font color="#20C000">sources</font></code> setting, FMPP will process only the files and/or directories listed there. Relative paths in this setting are resolved relatively to the source root directory, not to the configuration base (unless you use <code><font color="#20C000">outputFile</font></code> setting).</p>

<p>If you use the <code><font color="#20C000">outputFile</font></code> setting, then FMPP switches to single file mode. In this mode, it will process only 1 files, and store its output in the file specified by the <code><font color="#20C000">outputFile</font></code> setting. You must use <code><font color="#20C000">sources</font></code>, and it must list exactly 1 file. If a relative path is given in the <code><font color="#20C000">sources</font></code>, it is resolved relatively to configuration base, not to the source root. If you didn't specified <code><a href="settings.html#key_outputRoot" class=s><font color="#20C000">outputRoot</font></a></code> or <code><a href="settings.html#key_sourceRoot" class=s><font color="#20C000">sourceRoot</font></a></code>, it will default to the parent directory of the output file or source file respectively.</p>

<p>The user interface of front-ends tend to require you to use some special way to specify the value <code><font color="#20C000">sources</font></code> setting. Please read the <a href="frontends.html">documentation of the front-end</a> you use about this. Note that configuration files are front-end independent, so there you always simply set <code><font color="#20C000">sources</font></code> be assigning value to the <code><font color="#017D01">sources</font></code> key.</p>


<a name="sect6"></a>
     <h2><font color="#000000">Text encoding issues</font></h2>
<a name="key_sourceEncoding"></a>
  <p>
    <i>Name:</i> <b>sourceEncoding</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> <code><font color="#017D01">ISO-8859-1</font></code><br>
<i>Command-line short name: </i><tt>E</tt><br>
  </p>
<a name="key_outputEncoding"></a>
  <p>
    <i>Name:</i> <b>outputEncoding</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> <code><font color="#017D01">source</font></code><br>
  </p>
<a name="key_urlEscapingCharset"></a>
  <p>
    <i>Name:</i> <b>urlEscapingCharset</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> <code><font color="#017D01">output</font></code><br>
  </p>

<p>People use different encodings to store text in binary form, often referred as charsets. Examples of charsets are: <code><font color="#017D01">ISO-8859-1</font></code>, <code><font color="#017D01">ISO-8859-2</font></code>, <code><font color="#017D01">CP852</font></code>, <code><font color="#017D01">CP1250</font></code>, <code><font color="#017D01">Shift_JIS</font></code>, <code><font color="#017D01">UTF-8</font></code>. FMPP internally uses UNICODE everywhere, but when it has to read a text file or write a text file, it must deal with charsets to correctly decode/encode the text.
To read text files, FMPP uses the source encoding. This is be default ISO-8859-1. Also, a FreeMarker template has the ability to tell its own encoding with <code><font color="#017D01">&lt;#ftl encoding="<i>something</i>"></font></code>, and this overrides the source encoding for the individual template file.</p>

<p>To write text files, FMPP uses the output encoding. This is be default holds the special value <code><font color="#017D01">source</font></code>, which means that FMPP will use the encoding of the source text file (template file). If you change the value of the setting to a concrete charset, such as UTF-8, then text files will be always written with that encoding. However, templates can set the encoding of the output file with <code><font color="#017D01">&lt;@pp.setOutputEncoding encoding="<i>something</i>"/></font></code>, and this overrides the encoding dictated by the settings.</p>

<p>The <code><font color="#20C000">urlEscapingCharset</font></code> specifes the name of the charset (encoding) used for URL escaping. It defaults to <code><font color="#017D01">output</font></code>, which means that the output encoding will be used for URL escaping. URL escaping happens for example when you use FreeMarker's <code><font color="#017D01">url</font></code> built-in (e.g. <code><font color="#017D01">&lt;a href="foo.cgi?id=${id?url}"></font></code>) or the <a href="pphash.html#key_urlPathEnc"><code><font color="#017D01">pp.urlPathEnc</font></code> method</a>.</p>

<p>All of these settings understands the special charset <code><font color="#017D01">host</font></code>, which means the default encoding of the host operating system.</p>

<p>The set of supported charsets (and their preciese names) depends on the Java platfrom implementation you run FMPP on.</p>



<a name="processingMode"></a>
     <h2><font color="#000000">Processing mode choosing</font></h2>
<a name="key_modes"></a>
  <p>
    <i>Name:</i> <b>modes</b><br>
    <i>Type:</i> sequence (of function calls)<br>
    <i>Default:</i> empty<br>
<i>Command-line short name: </i><tt>M</tt><br>
  </p>
<a name="key_ignoreCvsFiles"></a>
  <p>
    <i>Name:</i> <b>ignoreCvsFiles</b><br>
    <i>Type:</i> boolean<br>
    <i>Default:</i> <code><font color="#017D01">true</font></code><br>
  </p>
<a name="key_ignoreSvnFiles"></a>
  <p>
    <i>Name:</i> <b>ignoreSvnFiles</b><br>
    <i>Type:</i> boolean<br>
    <i>Default:</i> <code><font color="#017D01">true</font></code><br>
  </p>
<a name="key_ignoreTemporaryFiles"></a>
  <p>
    <i>Name:</i> <b>ignoreTemporaryFiles</b><br>
    <i>Type:</i> boolean<br>
    <i>Default:</i> <code><font color="#017D01">true</font></code><br>
  </p>

<p>When FMPP has to process a file, it has to decide how to process that. That is, it has to choose a "processing mode" for the file. The processing mode can be one of:</p>
<ul>
  <li>execute: Execute the file as FreeMarker template (FTL)
  <li>copy: Copy the file as is. Uses binary copy; charset does not mater here.
  <li>renderXml: Parse the file as XML, and then render the XML document to output file(s) using a FreeMarker template. The template file is choosen for the XML file based on the <code><a href="settings.html#key_xmlRenderings" class=s><font color="#20C000">xmlRenderings</font></a></code> setting. For more information <a href="settings.html#xmlRendering">read about XML rendering...</a>
  <li>ignore: Skip the file.
</ul>

<p>First, if the <code><font color="#20C000">ignoreCvsFiles</font></code> setting is true, and the file name is <code><font color="#017D01">.cvsignore</font></code> or matches <code><font color="#017D01">.#?*</font></code>, or the file is inside a sub-directory of the source root that is called <code><font color="#017D01">CVS</font></code>, then it chooses the "ignore" processing mode. Also, if the <code><font color="#20C000">ignoreSvnFiles</font></code> setting is true, and the file is inside a sub-directory of the source root that is called <code><font color="#017D01">.svn</font></code>, then it chooses the "ignore" processing mode (note that it doesn't ignore conflict files, i.e., <code><font color="#017D01">*.mine</font></code> and <code><font color="#017D01">*.r<i>number</i></font></code>). Also, if <code><font color="#20C000">ignoreTemporaryFiles</font></code> setting is true, and the file name matches <code><font color="#017D01">?*~</font></code> or <code><font color="#017D01">~?*</font></code> or <code><font color="#017D01">#?*#</font></code> or <code><font color="#017D01">%?*%</font></code> or <code><font color="#017D01">_.?*</font></code>, or the extension (the part after the last dot in the file name) after converting to lowercase matches <code><font color="#017D01">bak</font></code> or <code><font color="#017D01">~*</font></code> or <code><font color="#017D01">*~</font></code> then it chooses the "ignore" processing mode. Note that the FMPP Ant task always sets these settings to <code><font color="#017D01">false</font></code>, so it does not interfere with the <code><font color="#017D01">defaultExcludes</font></code> parameter of Ant.</p>

<p>Then, the processing mode is chosen with a sequence of <a href="pathpattern.html">path patterns</a>, which is defined by the <code><font color="#20C000">modes</font></code> setting. The first path pattern in the sequence that matches the <a href="overview.html#virtualPath">virtual path</a> of the file, chooses the processing mode. If no matching path were found, then FMPP chooses the processing mode automatically:</p>
<ul>
  <li>If the file extension after converting to lowercase is <code><font color="#017D01">xml</font></code> and the <code><a href="settings.html#key_xmlRenderings" class=s><font color="#20C000">xmlRenderings</font></a></code> is not an empty sequence, then it chooses the "renderXml" mode.
  <li>If the file extension after converting to lowercase is one of: <code><font color="#017D01">ace</font></code>, <code><font color="#017D01">arc</font></code>, <code><font color="#017D01">arj</font></code>, <code><font color="#017D01">avi</font></code>, <code><font color="#017D01">bmp</font></code>, <code><font color="#017D01">bz</font></code>, <code><font color="#017D01">bz2</font></code>, <code><font color="#017D01">cab</font></code>, <code><font color="#017D01">chm</font></code>, <code><font color="#017D01">class</font></code>, <code><font color="#017D01">com</font></code>, <code><font color="#017D01">dll</font></code>, <code><font color="#017D01">doc</font></code>, <code><font color="#017D01">exe</font></code>, <code><font color="#017D01">fli</font></code>, <code><font color="#017D01">gif</font></code>, <code><font color="#017D01">gz</font></code>, <code><font color="#017D01">ico</font></code>, <code><font color="#017D01">jar</font></code>, <code><font color="#017D01">jpeg</font></code>, <code><font color="#017D01">jpg</font></code>, <code><font color="#017D01">lha</font></code>, <code><font color="#017D01">lzh</font></code>, <code><font color="#017D01">mov</font></code>, <code><font color="#017D01">mp3</font></code>, <code><font color="#017D01">mpeg</font></code>, <code><font color="#017D01">mpg</font></code>, <code><font color="#017D01">msi</font></code>, <code><font color="#017D01">pcx</font></code>, <code><font color="#017D01">pdf</font></code>, <code><font color="#017D01">png</font></code>, <code><font color="#017D01">ps</font></code>, <code><font color="#017D01">rar</font></code>, <code><font color="#017D01">swf</font></code>, <code><font color="#017D01">tar</font></code>, <code><font color="#017D01">taz</font></code>, <code><font color="#017D01">tga</font></code>, <code><font color="#017D01">tgz</font></code>, <code><font color="#017D01">tiff</font></code>, <code><font color="#017D01">tz</font></code>, <code><font color="#017D01">wav</font></code>, <code><font color="#017D01">wma</font></code>, <code><font color="#017D01">xls</font></code>, <code><font color="#017D01">zip</font></code>, then it chooses the "copy" processing mode.
  <li>Otherwise it chooses the "execute" processing mode.
</ul>
<p>The <code><font color="#20C000">modes</font></code> setting is a list of TDD functions, where the function name is either <code><font color="#017D01">execute</font></code>, <code><font color="#017D01">copy</font></code>, <code><font color="#017D01">renderXml</font></code>, or <code><font color="#017D01">ignore</font></code>. The arguments to the functions are one or more path patterns of virtual paths in the source file system. For example this (in a configuration file):</p>
<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">modes: [
    ignore(**/tmp/)
    copy(foo/**/*.html, foo/**/*.htm)
    execute(**/*.html, **/*.htm, **/*.xhtml)
    copy(**/*)
]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div><p>will produce this processing mode chooser sequence:</p>
<table border=1 cellspacing=0 cellpadding=4>
  <tr><th>Path pattern<th>Processing mode
  <tr><td><code><font color="#017D01">**/tmp/</font></code><td>ignore
  <tr><td><code><font color="#017D01">foo/**/*.html</font></code><td>copy
  <tr><td><code><font color="#017D01">foo/**/*.htm</font></code><td>copy
  <tr><td><code><font color="#017D01">**/*.html</font></code><td>execute
  <tr><td><code><font color="#017D01">**/*.htm</font></code><td>execute
  <tr><td><code><font color="#017D01">**/*.xhtml</font></code><td>execute
  <tr><td><code><font color="#017D01">**/*</font></code><td>copy
</table>

<p>Note that processing modes are only applicable to files, not to directories. Say, you can't tell FMPP to ignore a directory, but to ignore all files in the directory (as <code><font color="#017D01">**/tmp/</font></code> above). The end result will be that the directory will not be created, as it contains no output file.</p>



<a name="sect8"></a>
     <h2><font color="#000000">Header and footer choosing</font></h2>
<a name="key_borders"></a>
  <p>
    <i>Name:</i> <b>borders</b><br>
    <i>Type:</i> sequence (of function calls)<br>
    <i>Default:</i> empty<br>
  </p>

<p>With these settings you can insert a header before templates, and insert a footer after templates (templates = files processed in "execute" processing mode). The insertion of header and footer happens only in the memory of the computer, and does not modify the source files. This can be used to add common headers and footers to the templates without actually typing them again and again. Also, you can change the header/footer of many templates at once.</p>

<p>The intent of headers and footers is not to show something at the top and bottom of pages. Rather it is to insert FTL directives that import or include commonly used macros, or to place the page inside a directive block, as <code><font color="#017D01">&lt;#escape <i>...</i>><i>...</i>&lt;/#escape></font></code>. For concrete examples please see <code><font color="#017D01"><i>&lt;FMPP></i>/docs/examples/border</font></code>.</p>

<p><i><b>Note:</b> Unfortunately the inserted header displace the error locations (column, row) in the error messages (I can't fix it in FMPP; FreeMarker improvements are needed to address this). However, if the header doesn't contain line-break, then this unwanted effect is limited to the first line of the template. So it's strongly recommended to not use line-break in headers.</i></p>

<p>Footers and headers are chosen with similar mechanism to processing modes (see <code><a href="settings.html#key_modes" class=s><font color="#20C000">modes</font></a></code>). There are two independent sequence of path-pattern to text entry mappings (so called "choosers"), one for choosing headers, and one for choosing footers. When FMPP loads a template file, it checks if the <a href="overview.html#virtualPath">virtual path</a> of the file matches to an entry in the header chooser sequence, and if so, it uses the header specified in the first such entry. Also, it does the same with the sequence of footers choosers, to choose a footer.</p>

<p>There is a single setting to build both sequences at once: <code><font color="#20C000">borders</font></code>. You give a sequence of <code><font color="#017D01">header</font></code>, <code><font color="#017D01"> footer</font></code> and <code><font color="#017D01">border</font></code> functions in it. The first argument to <code><font color="#017D01">header</font></code> and <code><font color="#017D01"> footer</font></code> functions is the text of header and footer respectively, and the further arguments are the path patterns of virtual paths in the source file system. If you omit the path patterns, that's the same as if you give <code><font color="#017D01">**</font></code> (i.e. match all files). <code><font color="#017D01">border</font></code> is convenience function: <code><font color="#017D01">border(<i>a</i>, <i>b</i>, <i>paths...</i>)</font></code> is equivalent with <code><font color="#017D01">header(<i>a</i>, <i>paths...</i>), footer(<i>b</i>, <i>paths...</i>)</font></code>. Example:</p>
<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">header(&quot;&lt;#import '/lib/css.ftl' as css&gt;&quot;, **/*.css)
border(&quot;&lt;#escape x as x?html&gt;&quot;, &quot;&lt;/#escape&gt;&quot;, **/*.html, **/*.htm)<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div><p>This build these sequences:</p>
<ul>
  <li>Header chooser sequence:
  <table border=1 cellspacing=0 cellpadding=4>
    <tr><th>Path pattern<th>Header
    <tr><td><code><font color="#017D01">**/*.css</font></code><td><code><font color="#017D01">&lt;#import '/lib/css.ftl' as c></font></code>
    <tr><td><code><font color="#017D01">**/*.html</font></code><td><code><font color="#017D01">&lt;#escape x as x?html></font></code>
    <tr><td><code><font color="#017D01">**/*.htm</font></code><td><code><font color="#017D01">&lt;#escape x as x?html></font></code>
  </table>
  </li>
  <li>Footer chooser sequence:
  <table border=1 cellspacing=0 cellpadding=4>
    <tr><th>Path pattern<th>Footer
    <tr><td><code><font color="#017D01">**/*.html</font></code><td><code><font color="#017D01">&lt;/#escape></font></code>
    <tr><td><code><font color="#017D01">**/*.htm</font></code><td><code><font color="#017D01">&lt;/#escape></font></code>
  </table>
  </li>
</ul>

<p>Only the first matching entry of the sequence is used for a file, the later entries are ignored. But sometimes you want to choose multiple headers/footers for the same file. In that case, you can define multiple independent sequences, so said, layers. Layers are separated with <code><font color="#017D01">layer()</font></code>. For example, modify the above example, so it imports <code><font color="#017D01">/lib/common.ftl</font></code> at the top for all files, without disabling the other headers/footers:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px"># The 1st (implicit) layer starts here
header(&quot;&lt;#import '/lib/common.ftl' as c&gt;&quot;, **/*.css, **/*.html, **/*.htm),
layer()
# The 2nd layer starts here
header(&quot;&lt;#import '/lib/css.ftl' as css&gt;&quot;, **/*.css),
border(&quot;&lt;#escape x as x?html&gt;&quot;, &quot;&lt;/#escape&gt;&quot;, **/*.html, **/*.htm)<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>Here we have two independent header chooser sequences, so both CSS and HTLM files will import <code><font color="#017D01">lib/common.ftl</font></code>, and in additional CSS files will import <code><font color="#017D01">lib/css.ftl</font></code>, and HTML files will use an escape block. You can have any number of layers.</p>

<p>A header chosen from an earlier layer will be used earlier in the template file than headers chosen from later layers. A footer chosen from an earlier layer will be used later in the template file than footers chosen  from later layers. For example:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">borders: [
  border('L1(', ')L1')
  layer()
  border('L2{', '}L2')
  layer()
  border('L3[', ']L3')
]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>If the content of a template file is <code><font color="#017D01">content</font></code>, its output will be:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">L1(L2{L3[content]L3}L2)L1<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>


<a name="sect9"></a>
     <h2><font color="#000000">Output file name deduction</font></h2>
<a name="key_removeExtensions"></a>
  <p>
    <i>Name:</i> <b>removeExtensions</b><br>
    <i>Type:</i> sequence (of strings)<br>
    <i>Default:</i> empty<br>
<i>Command-line short name: </i><tt>R</tt><br>
  </p>
<a name="key_removePostfixes"></a>
  <p>
    <i>Name:</i> <b>removePostfixes</b><br>
    <i>Type:</i> sequence (of strings)<br>
    <i>Default:</i> empty<br>
  </p>
<a name="key_replaceExtensions"></a>
  <p>
    <i>Name:</i> <b>replaceExtensions</b><br>
    <i>Type:</i> sequence (of strings)<br>
    <i>Default:</i> empty<br>
  </p>

<p>Initially the name of the output file is the same as the name of the source file. These two settings allow you to change the output filename somewhat, be removing parts of source file name.

<p>The precise meaning of the settings:</p>
<ul>
  <li><code><font color="#20C000">removeExtensions</font></code>: If the source file name ends with an exension in this sequence, then it will be removed from the output file name. For example, if <code><font color="#017D01">t</font></code> is in the sequence (note that there is no dot before the <code><font color="#017D01">t</font></code>), then the output file for <code><font color="#017D01">example.html.t</font></code> will be <code><font color="#017D01">example.html</font></code>. The extension to remove can contain dots (as <code><font color="#017D01">tar.gz</font></code>).</li>
  
  <li><code><font color="#20C000">removePostfixes</font></code>: If the source file name before the first dot ends with a string in this sequence, then it will be removed from the output file name. For example, if <code><font color="#017D01">_t</font></code> is in the sequence, then the output file for <code><font color="#017D01">example_t.html</font></code> will be <code><font color="#017D01">example.html</font></code>. If the file name does not contains dot, then it still works: <code><font color="#017D01">example_t</font></code> will become to <code><font color="#017D01">example</font></code>.</li>
  
  <li><code><font color="#20C000">replaceExtensions</font></code>: This sequence is used to replace the file extensions with another extensions. For example, if the sequence is this:<br>
  <code><font color="#017D01">ftl, html, xftl, xml</font></code><br>
  then the <code><font color="#017D01">ftl</font></code> extension will be replaced with <code><font color="#017D01">html</font></code> (i.e. the output file name for source file <code><font color="#017D01">foo.ftl</font></code> will be <code><font color="#017D01">foo.html</font></code>), and the <code><font color="#017D01">xftl</font></code> extension will be replaced with <code><font color="#017D01">xml</font></code>. The 1st, 3rd, 5th, etc. sequence elements are the old extensions, and the 2nd, 4th, 6th, etc. sequence elements are the new extensions, so <code><font color="#017D01">html</font></code> extension will not be replaced with <code><font color="#017D01">xftl</font></code>. Also, only one extension replacement will occur for the same file name, so in the case of<br>
  <code><font color="#017D01">x, y, y, z</font></code><br>
  <code><font color="#017D01">x</font></code> will not become to <code><font color="#017D01">z</font></code>.</li>

</ul>
<p>The settings are applied in the order as they appear above. Each setting is applied only once on the same file name.

<p>Note that output file name deduction is only apply to files, not to directories.</p>



<a name="sect10"></a>
     <h2><font color="#000000">Skipping unchanged files</font></h2>
<a name="key_skipUnchanged"></a>
  <p>
    <i>Name:</i> <b>skipUnchanged</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> <code><font color="#017D01">none</font></code><br>
<i>Command-line short name: </i><tt>-U</tt><br>
  </p>

<p>This setting specifies that the processing of which source files can be skipped, if the source file was not modified after the last modification time of the output file. The value of setting can be one of:</p>
<ul>
  <li><code><font color="#017D01">none</font></code>: Don't skip unchanged files.
  <li><code><font color="#017D01">all</font></code>: Skip all unmodified files. <b>Warning!</b> It has the problem that if the data that the template displays was changed, or a file that is <code><font color="#017D01">&lt;#include <i>...</i>></font></code>-d or <code><font color="#017D01">&lt;#import <i>...</i>></font></code>-d by the template was changed, it will not re-generate the output, since the template file itself was not changed.
  <li><code><font color="#017D01">static</font></code>: Skip only unmodified files that will be simply copied anyway (the files where the <code><a href="settings.html#key_modes" class=s><font color="#20C000">modes</font></a></code> chooses "copy" processing mode). Process all other files. This is the recommended setting for most projects.
</ul>
<p>If the output does not exist, the source file will be always processed.<p>

<p>This feature will not work for templates that rename or drop the original output file during the template execution, since FMPP will believe in the next processing session that the output file for those files is missing, and thus it will process them again.</p>



<a name="sect11"></a>
     <h2><font color="#000000">Turn choosing</font></h2>
<a name="key_turns"></a>
  <p>
    <i>Name:</i> <b>turns</b><br>
    <i>Type:</i> sequence (of function calls)<br>
    <i>Default:</i> empty sequence<br>
  </p>

<p>When FMPP has to process multiple files in the same processing session (for example, when you process a whole directory), then the order in which the files will be processed, is undefined. This is a problem in certain use cases, where it must be ensured that certain files will be processed later than others. For example, if a page contains the alphabetic index of keywords occur in other pages, then that page must be processed for the last, because the information is collected during the processing of the other pages. This is what turns are about: to guarantee the order of the processing of files.</p>

<p>The processing session is divided up into, so called, turns. Turns are identified with the turn number, which is simply the order of the turn. The session starts with turn 1, then comes turn 2, and then comes turn 3, ...etc. FMPP puts all files that will be processed into exactly one of the turns, based on the turn chooser sequence.</p>

<p>The turn chooser sequence is a sequence of path-pattern -> turn-number pairs. For each source file, the <a href="overview.html#virtualPath">virtual path</a> of the source file is compared with these <a href="pathpattern.html">path patterns</a>, and the first pattern of the sequence that matches determines the turn in which the file will be processed. If there is no matching pattern in the sequence for the file, then the file will be processed in turn 1.</p>

<p>For example, if <code><font color="#017D01">config.fmpp</font></code> contains this line:

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">turns: [turn(3, main_idx.html), turn(2, **/*_idx.html)]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>then all files where the file name ends with <code><font color="#017D01">_idx.html</font></code> will be processed in turn 2, except <code><font color="#017D01">main_idx.html</font></code>, which will be processed in turn 3. All other files will be processed in turn 1.</p>

<p>There is no upper limit of the turn number (except a technically limit, somewhere near 2 thousand million). Simply, the last turn will be the turn with the highest number, which is mentioned in the turn chooser sequence, or 1, if the sequence is empty. The first turn is always the turn 1. It is not a problem if a turn contains no file processing.</p>

<p>See <code><font color="#017D01"><i>&lt;FMPP></i>/docs/examples/session</font></code> for a working example, or the FMPP task call in the <code><font color="#017D01">build.xml</font></code>.</p>



<a name="data"></a>
     <h2><font color="#000000">Data model building</font></h2>
<a name="key_data"></a>
  <p>
    <i>Name:</i> <b>data</b><br>
    <i>Type:</i> hash<br>
    <i>Default:</i> No default value<br>
<i>Command-line short name: </i><tt>D</tt><br>
  </p>
<a name="key_localData"></a>
  <p>
    <i>Name:</i> <b>localData</b><br>
    <i>Type:</i> sequence<br>
    <i>Default:</i> No default value<br>
  </p>
<a name="key_templateData"></a>
  <p>
    <i>Name:</i> <b>templateData</b><br>
      <i><font color=red>Deprecated!</font></i> Use <code><font color="#20C000">localData</font></code> instead.<br>
    <i>Type:</i> string (Java class name)<br>
    <i>Default:</i> No default value<br>
  </p>

<p>As you may <a href="freemarker/dgui_quickstart_basics.html">know from the FreeMarker manual</a>, FreeMarker generates the output by merging a template with a data model, and the data model is a hash variable, the root hash. With FMPP terminology, it is usually just referred as "the data". In FMPP, the population of the root hash happens in two places:</p>
<ol>
  <li>Session level data: Once per processing session, at the very beginning of it (before any file processing is stared), the root hash is filled with variables based on the <code><font color="#20C000">data</font></code> setting. This is what happened in the <a href="qtour.html">Quick Tour</a>, when we have loaded the colors and the table of birds. These variables will be constant during the whole session, and visible for all templates. They must not be modified while the processing session is executing, even if you find a technical way to do that. Note that <a href="freemarker/dgui_misc_var.html">FreeMarker uses multiple variable layers</a>, so you doesn't modify these variables with <code><font color="#017D01">&lt;#assign <i>...</i>></font></code> or <code><font color="#017D01">&lt;#global <i>...</i>></font></code>, just hide them for the time of the template execution, which is OK (the effect will not be visible for the files processed later).
  
  <li>Local data (file processing level data): For each processed file, just before FMPP starts to proccess the file, some extra variables are put into the root hash that are specific for that file. These variables will be present in the root hash only while that file is being processed (hence "local data"), so the next file processing will start with the original session level data in the root hash again. The local data is built in three steps, in this order:
    <ol>
      <li>Variables created based on the <code><font color="#20C000">localData</font></code> setting. (See details <a href="#localData">later...</a>)
      <li>Deprecated: User written Java object of class specified by <code><font color="#20C000">templateData</font></code> adds an arbitrary set of variables. This feature is deprecated and will be removed later.
      <li>The FMPP core adds the <a href="pphash.html"><code><font color="#017D01">pp</font></code> hash</a>.
    </ol>
  Variable added later will overwrite the variable of similar name added earlier. Also, variable that is local data will hide (seemingly overwrite) the variable of similar name that is session level data.
  </li>
</ol>

<p>From the view point of FreeMarker templates, variables that are part of the session level data and the part of the local data are not different. They are equal parts of the data model.</p>

<a name="sect13"></a>
     <h3><font color="#000000">More about the <code><font color="#20C000">data</font></code> setting</font></h3>

<p>When you use <a href="tdd.html">TDD syntax</a> for defining the hash for <code><font color="#20C000">data</font></code>, TDD function calls are interpreted as <a href="dataloader.html">data loader</a> invocations. For reminder, here is the relevant part of <code><font color="#017D01">config.fmpp</font></code> from <code><font color="#017D01"><i>&lt;FMPP></i>/docs/examples/qtour_step4</font></code>:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">data: {
    tdd(data/style.tdd)
    birds: csv(data/birds.csv)
}<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>TDD syntax makes it possible to enter values directly as well, without using data loaders. For example, you could directly enter the "birds" table with TDD (altoguh it is not too convenient):

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">data: {
    tdd(data/style.tdd)
    birds: [
        {
            name: arctic-tern
            description: &quot;Flies very long distances all years.&quot;
            favoriteFood: sardine
        }
        {
            name: house-sparrow
            description: &quot;Don't you say you don't know it...&quot;
            favoriteFood: sunflower
        }
        {
            name: sakeret
            description: &quot;Great hunter of the sky.&quot;
            favoriteFood: pigeon
        }
    ]
}<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>

 

<a name="localData"></a>
     <h3><font color="#000000">More about the <code><font color="#20C000">localData</font></code> setting</font></h3>

<p>Let's start with a simple example. We have a variable <code><font color="#017D01">bgColor</font></code> in the session level data with value <code><font color="#017D01">green</font></code>. We want to override this with value <code><font color="#017D01">yellow</font></code> for the source files that are in directory <code><font color="#017D01">sub</font></code> (or in its subdirectories, ...etc.):</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">data: {
    bgColor: green
}

localData: [
    case(sub/**, {bgColor: yellow})
]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>Complicate it a bit... now set the <code><font color="#017D01">bgColor</font></code> if the file is in directory <code><font color="#017D01">sub</font></code> or <code><font color="#017D01">sub2</font></code>:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">localData: [
    case(sub/**, sub2/**, {bgColor: yellow})
]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>Now do the same as earlier, except for files that are in directory <code><font color="#017D01">sub/sky</font></code>, where the <code><font color="#017D01">bgColor</font></code> is always <code><font color="#017D01">blue</font></code>:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">localData: [
    case(sub/sky/**, {bgColor: blue})
    case(sub/**, sub2/**, {bgColor: yellow})
]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>The rule is that the first <code><font color="#017D01">case(<i>...</i>)</font></code> where one of the path patterns matches the source file path, will specify the local data (given as the last parameter), and the further <code><font color="#017D01">case(<i>...</i>)</font></code>-s are ignored. There can be any number of <code><font color="#017D01">case(<i>...</i>)</font></code>-s listed (note that <code><font color="#017D01">localData</font></code> is a sequence), and a <code><font color="#017D01">case(<i>...</i>)</font></code> can have any number of path patterns (but 0).</p> 

<p>Tricky example: do the same as earlier, but don't override the color if the file name starts with <code><font color="#017D01">foo</font></code>:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">localData: [
    case(**/foo*, {})
    case(sub/sky/**, {bgColor: blue})
    case(sub/**, sub2/**, {bgColor: yellow})
]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>Assume you want to set variable <code><font color="#017D01">author</font></code> to <code><font color="#017D01">Joe</font></code> for all files where the file name contains <code><font color="#017D01">_j.</font></code>, and to <code><font color="#017D01">Amy</font></code> for all files contains <code><font color="#017D01">_a.</font></code>. But, you want to do this independently of the <code><font color="#017D01">bgColor</font></code> business. In this case you have to use layers:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">localData: [
    # The 1st (implicit) layer starts here
    case(**/foo*, {})
    case(sub/sky/**, {bgColor: blue})
    case(sub/**, sub2/**, {bgColor: yellow})
    layer()
    # The 2nd layer starts here
    case(**/*_j.*, {author: Joe})
    case(**/*_a.*, {author: Amy})
]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>The rule is that layers are separated with a <code><font color="#017D01">layer()</font></code> function call. You can have any number of layers. The <code><font color="#017D01">case(<i>...</i>)</font></code>-list of each layer will be searched for the first match independently. If more layers put the same variable into the data model, the higher layer (earlier layer) wins (hence "layers"). Layers are calculated starting with the lowest layer. Note that to ease setting merging, layers that doesn't contain any <code><font color="#017D01">case(<i>...</i>)</font></code>-s are removed automatically.</p>

<p>The last parameter of the case can be:</p>
<ul>
  <li>Arbitrary TDD hash (as in the examples above). This behaves as the value of the <code><font color="#20C000">data</font></code> setting, so you can use any number of key-value pairs, and invoke data loaders. The value of hash is calculated at most once per processing session, when it is first needed. For the subsequent file processings where the same <code><font color="#017D01">case(<i>...</i>)</font></code> is choosen, the calculated value is reused, so the data loaders don't re-load the external resources. If the <code><font color="#017D01">case(<i>...</i>)</font></code> is never chosen during the session, the value of the TDD hash is not calculated at all.</li>
  
  <li>A TDD function call. The supported functions are:
    <ul>
      <li><code><font color="#017D01">bsh</font></code>: Deduces the path of a BeanShell script file from the source file path, and executes that script to create local data. The path of the script file will be the same as the path of the source file, except that the file name part is modified according the options described later. The script must return a <code><font color="#017D01">java.util.Map</font></code>, which stores the variables (keys are the names of the variables, associated values are the values of the variables) that will be added to the local data. The following variables are accessible for the scripts: <code><font color="#017D01">engine</font></code>, the <code><font color="#017D01">fmpp.Engine</font></code> instance, and <code><font color="#017D01">templateEnvironment</font></code>, the <code><font color="#017D01">fmpp.TemplateEnvironment</font></code> instance. There is 1 parameter to this function (optional), a hash that can store the following options (each is optional):
        <ul>
          <li><code><font color="#017D01">ending</font></code>: The string appended at the end of the source file name. Can't be 0 length string. It defaults to <code><font color="#017D01">.bsh</font></code>.</li>
          <li><code><font color="#017D01">removeExtension</font></code>: Sets if the extension from the source file name should be removed before appending the <code><font color="#017D01">ending</font></code>. The extension is the part after the last dot of the file name. The dot itself is also removed. Defaults to <code><font color="#017D01">false</font></code>.</li>
          <li><code><font color="#017D01">ignoreMissing</font></code>: Set if it will be ignored if no script file found for the source file (and the source file will be processed normally), rather than aborting the processing of the file with error. Defaults to <code><font color="#017D01">false</font></code>.</li>
          <li><code><font color="#017D01">encoding</font></code>: The encoding of the script files. If it is not set then the value of the <code><a href="settings.html#key_sourceEncoding" class=s><font color="#20C000">sourceEncoding</font></a></code> setting will be used.</li>
        </ul>
      </li>
    </ul>
  </li>
  
  <li>A string. In this case the string will be interpreted as BeanShell script that must evaluate to an object that implements <code><font color="#017D01">fmpp.LocalDataBuilder</font></code>. This let Java programmers to implement custom local data strategies. See <a href="api/index.html">the API documentation</a> for more information. (The predefined strategies above are also implemented with this interface internally.)</li>
</ul>

<p>Finally, let see an example of the usage of the <code><font color="#017D01">bsh</font></code> function: It will execute a BeanShell script file for each HTML to add local data. For example, the script file for source file <code><font color="#017D01">foo/bar.html</font></code> should be <code><font color="#017D01">foo/bar.html.bsh</font></code>. If there is no script for the HTML file, it will not consider that as an error.</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">modes: ignore(**/*.bsh)
localData: [
    case(**/*.htm, **/*.html, bsh({ignoreMissing}))
]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>A possible <code><font color="#017D01">.bsh</font></code> file, that adds local variables <code><font color="#017D01">x</font></code> and <code><font color="#017D01">y</font></code>:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">res = new HashMap();
res.put(&quot;x&quot;, &quot;Just for test: &quot; + templateEnvironment.getData(&quot;author&quot;));
res.put(&quot;y&quot;, &quot;Blah...&quot;);
return res;<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>For a working example see <code><font color="#017D01"><i>&lt;FMPP></i>/docs/examples/local_data</font></code>.</p>

 



<a name="sect15"></a>
     <h2><font color="#000000">Locale</font></h2>
<a name="key_locale"></a>
  <p>
    <i>Name:</i> <b>locale</b><br>
    <i>Type:</i> string (locale)<br>
    <i>Default:</i> <code><font color="#017D01">en_US</font></code><br>
<i>Command-line short name: </i><tt>A</tt><br>
  </p>

<p>Set the locale (language, country) used in templates. It has significance because different countries write numbers differently, sort text differently, etc.</p>

<p>The value is a string which consist of a language code (lowercase two-letter ISO-639 code) plus optional county code (uppercase two-letter ISO-3166 code) separated from the language code with underscore, and if we have specified the country then an optional variant code (not standardized) separated from the country with underscore. Examples of valid values: <code><font color="#017D01">en</font></code>, <code><font color="#017D01">en_US</font></code>, <code><font color="#017D01">en_US_MAC</font></code>. FreeMarker will try to use the most specific available locale, so if you specify <code><font color="#017D01">en_US_MAC</font></code> but that is not known, then it will try <code><font color="#017D01">en_US</font></code>, and then <code><font color="#017D01">en</font></code>, and then the default locale of the computer.</p>

<p>Also, the special value <code><font color="#017D01">host</font></code> can be used to ask FMPP to use the default locale of the host operating system. However, for most applications it is not recommended to depend on the host locale, since then the output will depend on where you run the generation (and not on what people will use the output).</p>

<p>If you don't know what your locale string would be, use the <code><font color="#017D01">--print-locales</font></code> option of the command-line tool. Note that unfortunately, the codes printed here are far the superset of locales that Sun's Java platform implementation actually correctly handles.</p>

<p>Note that the initial value of the setting is <code><font color="#017D01">en_US</font></code>, because it is the locale that formats things similarly as a programmer would expect.</p>



<a name="sect16"></a>
     <h2><font color="#000000">Number format</font></h2>
<a name="key_numberFormat"></a>
  <p>
    <i>Name:</i> <b>numberFormat</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> <code><font color="#017D01">0.############</font></code><br>
  </p>

<p>This specifies the default format of numbers when FreeMarker has to convert numbers to strings.  For example, if you change this setting to <code><font color="#017D01">0.00</font></code> then:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">${1}, ${1.1}, ${1.245}<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>

<p>will print (if the locale setting is <code><font color="#017D01">en_US</font></code>):</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">1.00, 1.10, 1.25<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>

<p>Note that you can override the effect of this setting in the templates with <code><font color="#017D01">&lt;#setting number_format="<i>something</i>"></font></code>, also you can override this for each interpolations with <code><font color="#017D01">?string("<i>something</i>")</font></code>.</p>

<p>The syntax and semantic of the format string is as <code><font color="#017D01">java.text.DecimalFormat</font></code> defines it. For convenience I quote a part from the documentation of <code><font color="#017D01">java.text.DecimalFormat</font></code>:</p> 

<!--[BEGIN]-->
 <p><strong>Pattern Syntax</strong>
 <pre>
 pattern     := pos_pattern{';' neg_pattern}
 pos_pattern := {prefix}number{suffix}
 neg_pattern := {prefix}number{suffix}
 number      := integer{'.' fraction}{exponent}
 prefix      := '&#92;u0000'..'&#92;uFFFD' - special_characters
 suffix      := '&#92;u0000'..'&#92;uFFFD' - special_characters
 integer     := min_int | '#' | '#' integer | '#' ',' integer
 min_int     := '0' | '0' min_int | '0' ',' min_int
 fraction    := '0'* '#'*
 exponent    := 'E' '0' '0'*
 &#32;
 Notation:
   X*       0 or more instances of X
   { X }    0 or 1 instances of X
   X | Y    either X or Y
   X..Y     any character from X up to Y, inclusive
   S - T    characters in S, except those in T
 </pre>

 <p><strong>Special Pattern Characters</strong>

 <p>Many characters in a pattern are taken literally; they are matched during
 parsing and output unchanged during formatting.  Special characters, on the
 other hand, stand for other characters, strings, or classes of characters.
 They must be quoted, unless noted otherwise, if they are to appear in the
 prefix or suffix as literals.

 <p>The characters listed here are used in non-localized patterns.  Localized
 patterns use the corresponding characters taken from this formatter's
 <code>DecimalFormatSymbols</code> object instead, and these characters lose
 their special status.  Two exceptions are the currency sign and quote, which
 are not localized.

 <p><table border=1>
 <tr><th>Symbol<th>Location<th>Localized?<th>Meaning</tr>
 <tr><td>0<td>Number<td>Y<td>Digit
 <tr><td>#<td>Number<td>Y<td>Digit, zero shows as absent</tr>
 <tr><td>.<td>Number<td>Y<td>Decimal separator or monetary decimal separator</tr>
 <tr><td>-<td>Number<td>Y<td>Minus sign</tr>
 <tr><td>,<td>Number<td>Y<td>Grouping separator</tr>
 <tr><td>E<td>Number<td>Y
          <td>Separates mantissa and exponent in scientific notation.
              <em>Need not be quoted in prefix or suffix.</em></tr>
 <tr><td>;<td>Subpattern boundary<td>Y
          <td>Separates positive and negative subpatterns</tr>
 <tr><td>%<td>Prefix or suffix<td>Y<td>Multiply by 100 and show as percentage</tr>
 <tr><td>&#92;u2030<td>Prefix or suffix<td>Y
                   <td>Multiply by 1000 and show as per mille</tr>
 <tr><td>&#164;<br>(&#92;u00A4)<td>Prefix or suffix<td>N
                   <td>Currency sign, replaced by currency symbol.  If
                   doubled, replaced by international currency symbol.
                   If present in a pattern, the monetary decimal separator
                   is used instead of the decimal separator.</tr>
 <tr><td>'<td>Prefix or suffix<td>N
          <td>Used to quote special characters in a prefix or suffix,
              for example, <code>"'#'#"</code> formats 123 to
              <code>"#123"</code>.  To create a single quote
              itself, use two in a row: <code>"# o''clock"</code>.</tr>
 </table>
<!--[END]-->


<a name="sect17"></a>
     <h2><font color="#000000">Date/time issues</font></h2>
<a name="key_dateFormat"></a>
  <p>
    <i>Name:</i> <b>dateFormat</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> No default value<br>
  </p>
<a name="key_timeFormat"></a>
  <p>
    <i>Name:</i> <b>timeFormat</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> No default value<br>
  </p>
<a name="key_datetimeFormat"></a>
  <p>
    <i>Name:</i> <b>datetimeFormat</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> No default value<br>
  </p>
<a name="key_timeZone"></a>
  <p>
    <i>Name:</i> <b>timeZone</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> No default value<br>
  </p>

<p>These settings are directly the settings of FreeMarker; see the <a href="freemarker/index.html">FreeMarker Manual</a> for more details. Also, about the format patterns <a href="datetimepattern.html">read this</a>.</p>

<p>If the formats are not defined, then the default format for the current locale will be used (which is specified by the Java platform implementation you run FMPP on). If the time zone is not defined, then the time zone of the host computer will be used.</p>



<a name="sect18"></a>
     <h2><font color="#000000">Handling errors</font></h2>
<a name="key_stopOnError"></a>
  <p>
    <i>Name:</i> <b>stopOnError</b><br>
    <i>Type:</i> boolean<br>
    <i>Default:</i> <code><font color="#017D01">true</font></code><br>
<i>Command-line short name: </i><tt>s, c</tt><br>
  </p>

<p>Be default when FMPP encounters problem during the processing of a source file, it terminates the whole processing session with the error. It can be annoying if you have many bad files, because you have to restart the whole session and wait until the session reaches another bungled template (or other kind of problematic source file), again and again, until you have fixed all of them. If you change this setting to <code><font color="#017D01">false</font></code>, FMPP will not stop on the errors, just skips the problematic source file and continues the processing session with the next source file. You should use <code><a href="settings.html#key_logFile" class=s><font color="#20C000">logFile</font></a></code> together in this case, so you can later digest all problems occured during the processing session.</p>

<p>Note that this settings will only suppress errors that occur during the processing of source files. It will not suppress errors like, for example, bad data files (unless it's loaded in a template with <code><font color="#017D01">pp.data</font></code>) or invalid setting values.</p>



<a name="sect19"></a>
     <h2><font color="#000000">Expert mode</font></h2>
<a name="key_expert"></a>
  <p>
    <i>Name:</i> <b>expert</b><br>
    <i>Type:</i> boolean<br>
    <i>Default:</i> <code><font color="#017D01">false</font></code><br>
<i>Command-line short name: </i><tt>x</tt><br>
  </p>

<p>This setting is to enable suspicious situations, when the engine or the tool suspects that you have miss-configured something, and thus an accidental data loss can happen. It is recommended to leave this setting false, until it actually blocks something that you want to do.</p>

<p>Please note that overwriting a file in general is a normal situation for FMPP; no expert mode required to do that.</p>


<a name="sect20"></a>
     <h2><font color="#000000">Case sensitive path comparison</font></h2>
<a name="key_caseSensitive"></a>
  <p>
    <i>Name:</i> <b>caseSensitive</b><br>
    <i>Type:</i> boolean<br>
    <i>Default:</i> <code><font color="#017D01">false</font></code><br>
  </p>

<p>This setting tells if FMPP should differentiate upper- and lower-case letters when it compares paths for equality, or when it matches paths to path patterns. Regardless of this setting, FMPP always tries to keep the case of file names (i.e. the output of <code><font color="#017D01">Foo.txt</font></code> will be <code><font color="#017D01">Foo.txt</font></code>, and not <code><font color="#017D01">foo.txt</font></code> or <code><font color="#017D01">FOO.TXT</font></code>), as far as the host operating system does not prevent this.</p>


<a name="logging"></a>
     <h2><font color="#000000">Logging</font></h2>
<a name="key_logFile"></a>
  <p>
    <i>Name:</i> <b>logFile</b><br>
    <i>Type:</i> string (path)<br>
    <i>Default:</i> No default value<br>
<i>Command-line short name: </i><tt>L</tt><br>
  </p>
<a name="key_appendLogFile"></a>
  <p>
    <i>Name:</i> <b>appendLogFile</b><br>
    <i>Type:</i> boolean<br>
    <i>Default:</i> No default value<br>
  </p>

<p>If these settings are supported or not, depends on the front-end you use. If a setting is not supported, the front-end must silently ignore it.</p>

<p>If the <code><font color="#20C000">logFile</font></code> setting is set, the front-end should record information about the processing session into the file, such as the warning messages and errors occurred.</p>

<p>If <code><font color="#20C000">appendLogFile</font></code> is <code><font color="#017D01">false</font></code>, then already existing log file (possibly left from the previous processing session) is deleted and restarted. This is the recommended default behavior, however a front-end may chooses something different. If <code><font color="#20C000">appendLogFile</font></code> is <code><font color="#017D01">true</font></code>, then old log file should be continued.</p>

<p>Please read the documentation of <a href="frontends.html">the front-end you use</a> for the precise behavior of these settings.</p>



<a name="sect22"></a>
     <h2><font color="#000000">Showing the progress and other messages</font></h2>
<a name="key_quiet"></a>
  <p>
    <i>Name:</i> <b>quiet</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> No default value<br>
<i>Command-line short name: </i><tt>q, v, Q</tt><br>
  </p>
<a name="key_echoFormat"></a>
  <p>
    <i>Name:</i> <b>echoFormat</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> No default value<br>
<i>Command-line short name: </i><tt>F</tt><br>
  </p>
<a name="key_columns"></a>
  <p>
    <i>Name:</i> <b>columns</b><br>
    <i>Type:</i> integer<br>
    <i>Default:</i> No default value<br>
  </p>
<a name="key_snip"></a>
  <p>
    <i>Name:</i> <b>snip</b><br>
    <i>Type:</i> string (path)<br>
    <i>Default:</i> No default value<br>
  </p>

<p>If these settings are supported or not, depends on the front-end you use. If a setting is not supported, the front-end must silently ignore it.</p>

<p>The <code><font color="#20C000">quiet</font></code> setting tells the front-end if how much should it show the progress of the processing session on the screen. The accepted values are <code><font color="#017D01">true</font></code>, <code><font color="#017D01">false</font></code> (of type string or boolean), and <code><font color="#017D01">reallyQuiet</font></code>. Also, empty string is equivalent with <code><font color="#017D01">true</font></code>. (Values <code><font color="#017D01">-1</font></code>, <code><font color="#017D01">0</font></code>, <code><font color="#017D01">1</font></code> are also supported for backward compatibility.) The precise meaning of values is front-end specific.</p>

<p>The <code><font color="#20C000">echoFormat</font></code> setting specifies how to display the progress of the processing session on the screen. The meaning of values and the set of understood values are front-end specific, but values <code><font color="#017D01">verbose</font></code>, <code><font color="#017D01">normal</font></code>, <code><font color="#017D01">terse</font></code> and <code><font color="#017D01">quiet</font></code> should be understood, also the shorthands of them: <code><font color="#017D01">v</font></code>, <code><font color="#017D01">n</font></code>, <code><font color="#017D01">t</font></code> and  <code><font color="#017D01">q</font></code>. The front-end must not stop with error if it doesn't understand the value that comes from a configuration file.</p>

<p>The <code><font color="#20C000">columns</font></code> setting specifies the number of columns can be used for textual ouputs, as on the console screen.</p>

<p>The <code><font color="#20C000">snip</font></code> setting indicates if the front-end should snip too long messages when it prints them to the screen.</p>

<p>Please read the documentation of <a href="frontends.html">the front-end you use</a> for the precise behavior of these settings.</p>


<a name="metaSettings"></a>
     <h2><font color="#000000">Meta settings</font></h2>
<a name="key_configurationBase"></a>
  <p>
    <i>Name:</i> <b>configurationBase</b><br>
    <i>Type:</i> string (path)<br>
    <i>Default:</i> No default value<br>
  </p>
<a name="key_inheritConfiguration"></a>
  <p>
    <i>Name:</i> <b>inheritConfiguration</b><br>
    <i>Type:</i> string (path)<br>
    <i>Default:</i> No default value<br>
  </p>

<p>These settings influence the interpretation of the configuration file they are stored in. Although front-ends may support the specification of these settings outside configuration files, with the front-end specific interface, the meta setting specified in this way is used to emulate that the setting is present in the configuration file the front-end loads.</p>

<p>The <code><font color="#20C000">configurationBase</font></code> setting sets the <a href="configfile.html#configurationBase">configuration base</a> for the setting values stored in the same configuration file. If the <code><font color="#20C000">configurationBase</font></code> itself is a relative path, then it is resolved relatively to the directory of the configuration file.</p>

<p>If <code><font color="#20C000">inheritConfiguration</font></code> is present in a configuration file, then the configuration will <a href="configfile.html#inheritance">inherit the configuration file</a> pointed by the value of this setting. If <code><font color="#20C000">inheritConfiguration</font></code> is a relative path, then it is resolved relatively to the configuration base, which is already overridden by <code><font color="#20C000">configurationBase</font></code> if that's persent in the configuration file.</p>



<a name="xml"></a>
     <h2><font color="#000000">XML related settings</font></h2>

<a name="key_xmlCatalogFiles"></a>
  <p>
    <i>Name:</i> <b>xmlCatalogFiles</b><br>
    <i>Type:</i> sequence (of paths)<br>
    <i>Default:</i> No default value<br>
  </p>
<a name="key_xmlCatalogPrefer"></a>
  <p>
    <i>Name:</i> <b>xmlCatalogPrefer</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> <code><font color="#017D01">public</font></code><br>
  </p>
<a name="key_validateXml"></a>
  <p>
    <i>Name:</i> <b>validateXml</b><br>
    <i>Type:</i> boolean<br>
    <i>Default:</i> <code><font color="#017D01">false</font></code><br>
  </p>
<a name="key_xpathEngine"></a>
  <p>
    <i>Name:</i> <b>xpathEngine</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> <code><font color="#017D01">dontSet</font></code><br>
  </p>
<a name="key_xmlRenderings"></a>
  <p>
    <i>Name:</i> <b>xmlRenderings</b><br>
    <i>Type:</i> sequence (of hashes)<br>
    <i>Default:</i> empty<br>
  </p>

<a name="sect25"></a>
     <h3><font color="#000000">Catalogs</font></h3>

<p>Catalog files are (primarily) used to map public identifiers (and system identifiers) to local files. For example, you want to load an XML file that starts with this:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!DOCTYPE html
    PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
    &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;
&gt;<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>Whenever you try to load this XML file, the XML parser will need the DTD requested by the DOCTYPE, so it will try to download it from <code><font color="#017D01">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</font></code> (and all other files the DTD will refer to), which is obviously a bad joke. The standard solution is that you obtain the DTD file (and the further files it refers to) and store it locally on your computer, and also you write a catalog file that maps public identifiers (as <code><font color="#017D01">-//W3C//DTD XHTML 1.0 Transitional//EN</font></code>) to the local paths of the files. Then, you have to specify the catalog file(s) for FMPP with the <code><font color="#20C000">xmlCatalogFiles</font></code> setting.</p>

<p>FMPP supports the "widely known" catalog formats: OASIS plain text TR9401 catalog files, OASIS XML Catalogs, and XCatalogs. Delegate entries are supported. Don't panic if you can't undestand a word of it! :) Just look at <code><font color="#017D01"><i>&lt;FMPP></i>/docs/examples/xml_validating</font></code>. For most people it's enough to know (copy-paste...) what (s)he sees there. If you still need more information, please visit the Web page of the OASIS Entity Resolution Technical Committee: <a href="http://www.oasis-open.org/committees/tc_home.php?wg_abbrev=entity">http://www.oasis-open.org/committees/tc_home.php?wg_abbrev=entity</a>.</p>

<p>The meaning of <code><font color="#20C000">xmlCatalogPrefer</font></code> should be clean if you are familiar with OASIS catalogs. If you are not, just left it unchanged. The allowed values of this setting are <code><font color="#017D01">system</font></code>, <code><font color="#017D01">public</font></code>, and <code><font color="#017D01">globalDefault</font></code>.</p>

<p>Both catalog related settings has a global (Java virtual machine level) default. Please find the documentation of <code><font color="#017D01">org.apache.xml.resolver</font></code> package on the Internet about this. In the case of <code><font color="#20C000">xmlCatalogFiles</font></code>, the global default will be appended at the end of the list of catalog files. In the case of <code><font color="#20C000">xmlCatalogPrefer</font></code>, the global default is used when the value of the setting is <code><font color="#017D01">globalDefault</font></code>. Attention! If you don't use the <code><font color="#20C000">xmlCatalogFiles</font></code> FMPP setting, then the catalog feature is disabled, so you must specify this setting (even an empty sequence) to use the global defaults.</p>



<a name="sect26"></a>
     <h3><font color="#000000">Validation</font></h3>

<p>The <code><font color="#20C000">validateXml</font></code> setting specifies if, by default, XML files are validated (i.e. checked against the DTD) or not. With "by default" I mean that this can be overridden for individual files, as with the <code><font color="#017D01">validate</font></code> option of the <a href="dataloader.html#key_xml">xml data loader</a>.</p>



<a name="sect27"></a>
     <h3><font color="#000000">XPath engine</font></h3>

<p>The <code><font color="#20C000">xpathEngine</font></code> setting specifies which XPath engine will FreeMarker use when you access XML data (see <a href="dataloader.html#key_xml">XML dataloader</a>). This setting accepts these values:</p>

<ul>
  <li><code><font color="#017D01">jaxen</font></code>: Use Jaxen. For this to work, you need to <a href="http://jaxen.org/">obtain <code><font color="#017D01">jaxen.jar</font></code></a> (1.1-beta-8 or later!), and make it accessible for FMPP (e.g. copy it into the <code><font color="#017D01">lib</font></code> directory of the FMPP installation, or if you use FMPP as Ant task, then into the <code><font color="#017D01">lib</font></code> directory of Ant). Jaxen provides richer set of capabilities for FreeMarker templates than Xalan.</li>
  <li><code><font color="#017D01">xalan</font></code>: Use Apache Xalan. Xalan is accessible for sure if you are using Sun J2SE 1.4, but not in 1.5.</li>
  <li><code><font color="#017D01">default</font></code>: Let FreeMarker choose the XPath engine it prefers. In FreeMarker 2.3 it will be Xalan (if available).</li>
  <li><code><font color="#017D01">dontSet</font></code>: Don't set what XPath engine will be used. For most users it is the same as <code><font color="#017D01">default</font></code> (see below). This is the default value of the setting.</li>
  <li>All other values are interpreted as the full-qualified class name of an XPath engine adapter class, that is, a <code><font color="#017D01">freemarker.ext.dom.XPathSupport</font></code> implementation.</li>
</ul>

<p>If you embed FMPP into your application, then you have to know that XPath engine choosing is a VM level setting (static field) of FreeMarker. Whenever you execute a processing session, FMPP will aggressively set this FreeMarker setting according the <code><font color="#20C000">xpathEngine</font></code> FMPP setting. Thus, if you don't want FMPP to interfere with other FreeMarker dependent components in the same VM, you should keep value <code><font color="#017D01">dontSet</font></code>.</p>


<a name="xmlRendering"></a>
     <h3><font color="#000000">XML rendering</font></h3>

<p>XML rendering is similar to the typical XSLT usage pattern, if you know that. The source file, for which <code><font color="#017D01">renderXml</font></code> processing mode is choosen (see the <code><a href="settings.html#key_modes" class=s><font color="#20C000">modes</font></a></code> setting), will be parsed as XML file. Then, this XML document will be rendered to one or more output files with a FreeMarker template, which is choosen based on the value of the <code><font color="#20C000">xmlRenderings</font></code> setting. The template gets the XML documents with the <a href="pphash.html#key_doc"><code><font color="#017D01">pp.doc</font></code> variable</a>. Since the template shouldn't be executed in itself, it should be an ignored file (for example it should be stored in a directory that has an <code><font color="#017D01">ignoredir.fmpp</font></code> file).

<p>For an example of this pattern check <code><font color="#017D01"><i>&lt;FMPP></i>/docs/examples/xml_rendering</font></code>.</p>

<p><i><b>Note:</b> Sometimes you rather want to handle XML files as data than as source files. In this case use <code><a href="settings.html#key_data" class=s><font color="#20C000">data</font></a></code>, <code><a href="settings.html#key_localData" class=s><font color="#20C000">localData</font></a></code>, or <a href="pphash.html#key_loadData"><code><font color="#017D01">pp.loadData</font></code></a> with the <a href="dataloader.html#key_xml">XML data loader</a>, not XML rendering.</i></p>

<p>The <code><font color="#20C000">xmlRenderings</font></code> setting stores a sequence of XML rendering configurations. An XML rendering configuration is a hash that stores the options of an XML rendering. The options are:</p>

<ul>
  <li>Options specify which XML files should be processed with the configuration:
    <ul>
      <li><code><font color="#017D01">IfSourceIs</font></code>: Optional, defaults to an empty sequence. This option is a sequence of path patterns (strings), or a single path pattern. FMPP will not render the XML file with this configuration if its source root relative virtual path does not match a pattern in this sequence. If this sequence is empty, FMPP will not consider this condition, that is, it will not exclude any XML files because of their path.</li>
      
      <li><code><font color="#017D01">ifDocumentElementIs</font></code>: Optional, defaults to an empty sequence. This option is a sequence of element names (strings), or a single element name. FMPP will not render the XML file with this configuration if this sequence doesn't contain the document element (the root element) of the XML file. If this sequence is empty, FMPP will not consider this condition, that is, it will not exclude any XML files because of their document element. The element names can use name-space prefixes. The prefixes and the default name-space of elements can be specified with the <code><font color="#017D01">xmlns</font></code> option of the configuration.</li>
    </ul>
  </li>
  
  <li>Options specify how to load the XML file. These are exactly the same as the options of the <a href="dataloader.html#key_xml">XML data loader</a> (<code><font color="#017D01">xmlns</font></code>, <code><font color="#017D01">index</font></code>, ...etc.), except that <code><font color="#017D01">false</font></code> value for <code><font color="#017D01">namespaceAware</font></code> is not allowed.</li>
  
  <li>Options for java programmers, to build extra local data based on the loaded XML file.
    <ul>
      <li><code><font color="#017D01">localDataBuilder</font></code>: Optional, defaults to an empty sequence. This is a sequence of strings, or a single string. Each string will be evaluated as BeanShell script (once per <code><font color="#017D01">Settings.execute()</font></code>), which must return an <code><font color="#017D01">fmpp.LocalDataBuilder</font></code>. The aim of these data builders is to do the complex or resource eager parts of the XML processing that you don't want to do in FTL, and expose the results as local data. The data loaders can get the loaded XML document with <code><font color="#017D01">templateEnvironment.getXmlDocument()</font></code>, or <code><font color="#017D01">templateEnvironment.getWrappedXmlDocument()</font></code>. These data builders will be invoked after the application of the <code><a href="settings.html#key_localData" class=s><font color="#20C000">localData</font></a></code> setting, and can replace earlier added local variables. They will be executed in the same order as they appear in the sequence.</li>
    </ul>
  </li>
  
  <li>Options specify how to render the XML document to output file:
    <ul>
      <li><code><font color="#017D01">template</font></code>: Required if <code><font color="#017D01">copy</font></code> is <code><font color="#017D01">false</font></code>. This is the source root relative virtual path of a FreeMarker template, which will be invoked to render the output. (The template file itself should be an ignored file, as it doesn't produce output alone.) The template can access the XML document with the <a href="pphash.html#key_doc"><code><font color="#017D01">pp.doc</font></code> variable</a>.</li>
      
      <li><code><font color="#017D01">copy</font></code>: Required if <code><font color="#017D01">template</font></code> is not specified, defaults to <code><font color="#017D01">false</font></code>. This is a boolean value. If it is <code><font color="#017D01">true</font></code>, then the XML document will be copied to the output file (exact copy). In this case the <code><font color="#017D01">template</font></code> option can't be used.</li>
    </ul>
  </li>
</ul>

<p>Example:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">xmlRenderings: [
    {
        ifDocumentElementIs: product
        template: renderer/product.html
        xmlns: {D: http://example.com/xmlns/products}
    }
    {
        ifDocumentElementIs: book
        template: renderer/book.html
        index: {
            element: [part, chapter]
            attribute: ppFile
            numbering: hierarchical
            value: '%e_%n.html'
        }
    }
]<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>When <code><font color="#017D01">renderXml</font></code> processing mode is chosen for a source file (see <code><a href="settings.html#key_modes" class=s><font color="#20C000">modes</font></a></code>), then the first matching XML rendering configuration of the sequence will be used. A configuration is matching if nor the <code><font color="#017D01">ifSourceIs</font></code>, nor the <code><font color="#017D01">ifDocumentElementIs</font></code> option excludes the XML file. (Thus, if a configuration doesn't use any of the <code><font color="#017D01">if<i>...</i></font></code> options, it will be used for all source files, unless an earlier configuration matches the source file too.)</p>




<a name="sect29"></a>
     <h2><font color="#000000">FreeMarker links (external includes)</font></h2>
<a name="key_freemarkerLinks"></a>
  <p>
    <i>Name:</i> <b>freemarkerLinks</b><br>
    <i>Type:</i> hash (of sequence of paths)<br>
    <i>Default:</i> No default value<br>
  </p>

<p>FreeMarker links is a dirty hack to satisfy a frequent demand: <code><font color="#017D01">&lt;#include ...></font></code>/<code><font color="#017D01">&lt;#import ...></font></code> files that are outside the source root directory, as common FTL macro libraries used in multiple projects.</p>

<p>Assume you store your commonly used FreeMarker includes in the <code><font color="#017D01">c:\user\freemarker\include</font></code> directory. But, this directory is outside the <code><a href="settings.html#key_sourceRoot" class=s><font color="#20C000">sourceRoot</font></a></code>, so you can't reach it with <code><font color="#017D01">&lt;#include ...></font></code>/<code><font color="#017D01">&lt;#import ...></font></code>. To solve this, add this to the FMPP configuration file:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">freemarkerLinks: {
    inc: c:/user/freemarker/include
}<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>Now you can include files of that external directory like this:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">&lt;#include &quot;/@inc/foo.ftl&quot;&gt;<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>Here, FreeMarker will actually read <code><font color="#017D01">c:\user\freemarker\include\foo.ftl</font></code>. The seeming <code><font color="#017D01">@inc</font></code> entry in the source root directory (seeming, as there is no such file or directory there in reality) acts as an alias, a transparent link to <code><font color="#017D01">c:\user\freemarker\include</font></code>. (Note that in the configuration file I have used <a href="overview.html#realPath">slash instead of backslash for convenience</a>.)</p>

<p>It is important that link entries (as <code><font color="#017D01">@inc</font></code> above) are visible only for the predefined FreeMarker directives that use template paths (in FreeMarker 2.3, these are <code><font color="#017D01">&lt;#include ...></font></code> and <code><font color="#017D01">&lt;#import ...></font></code>), or for user defined directives that internally use those predefined directives. They are not visible for anything else. Thus, they are not visible for the functions and directives of the <code><font color="#017D01">pp</font></code> hash, nor FMPP will try to process the <code><font color="#017D01">@inc</font></code> directory (since it doesn't see it at all).</p>

<p>As you have seen, a link is defined by associating a name (<code><font color="#017D01">inc</font></code> in the last example, but you can use anything else you prefer) with a path. You can have more links with different names. The link is visible in the source root (never in its subdirectories) as a directory (or file) of name <code><font color="#017D01">@<i>name</i></font></code> (where <code><font color="#017D01"><i>name</i></font></code> is the link name). Regarding the associated path, the rules are the same as with <code><a href="settings.html#key_sourceRoot" class=s><font color="#20C000">sourceRoot</font></a></code>, <code><a href="settings.html#key_outputRoot" class=s><font color="#20C000">outputRoot</font></a></code>, ...etc: it is a <a href="overview.html#realPath">real path</a>, so if it is relative, then it will be interpreted relatively to the <a href="overview.html#realPath">configuration base</a>.</p>

<p>For example, assume, that you also have project specific include files, and you store them outside the source root (because you have multiple source roots in your project), in the <code><font color="#017D01">include</font></code> subdirectory of the same directory, where you stores the FMPP configuration files for your project. Use this in the FMPP configuration file:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">freemarkerLinks: {
    inc: /home/joe/freemarker/include
    projInc: include
}<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>Note that the path associated with <code><font color="#017D01">projInc</font></code> is a relative path, so it will be resolved relatively to the directory of the configuration file (unless you have overridden the configuration base, of course...). Now you can do things like this:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">&lt;#include &quot;/@projInc/header.html&quot;&gt;
&lt;#include &quot;/@inc/foo.ftl&quot;&gt;
&lt;#import &quot;/@projInc/forms.ftl&quot; as f&gt;<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>If the configuration file that contains the above is <code><font color="#017D01">/home/joe/projects/foo/cfg3.fmpp</font></code>, then <code><font color="#017D01">&lt;#include '/@projInc/header.html'></font></code> will read <code><font color="#017D01">/home/joe/projects/foo/include/header.html</font></code>.</p>

<p>In the generic case, a FreeMarker link is associated with a list of paths. For example:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">freemarkerLinks: {
    inc: [/home/joe/freemarker/include, /home/kate/freemarker/include]
}<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>When you use <code><font color="#017D01">&lt;#include '/@inc/foo.ftl'></font></code> in a template, then FMPP will check if <code><font color="#017D01">/home/joe/freemarker/include/foo.ftl</font></code> exist, and if not, it will try <code><font color="#017D01">/home/kate/freemarker/include/foo.ftl</font></code>.</p>

<p>Files that are really in the source root directory have priority over files that are accessible through FreeMarker links. For example, if you invoke <code><font color="#017D01">&lt;#include '/@inc/foo.ftl'></font></code>, and the source root directory has a subdirectory called <code><font color="#017D01">@inc</font></code>, and that subdirectory has a file called <code><font color="#017D01">foo.ftl</font></code>, then that file will be used, without considering that the <code><font color="#017D01">@inc</font></code> in the path possibly refers to a FreeMarker link. If a subdirectory called <code><font color="#017D01">@inc</font></code> exists, but it doesn't contain <code><font color="#017D01">foo.ftl</font></code>, then the <code><font color="#017D01">inc</font></code> link will be used.</p>

<p>A FreeMarker link can point to files as well, not only to directories. For example:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">freemarkerLinks: {
    footer: /home/joe/footers/gpl.html
}<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>and then in a template you can do this:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">&lt;#include &quot;@footer&quot;&gt;<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>The merging of the <code><font color="#20C000">freemarkerLinks</font></code> settings is differs a bit from the merging of other hash settings: when the two hashes to merge contains the same key (i.e. the same link name), then the lists of paths for that key will be concatenated. For example, if <code><font color="#017D01">common.fmpp</font></code> is:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">freemarkerLinks: {
    a: c:/user/fm/libs1
    b: [inc1, inc2]
}<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>and <code><font color="#017D01">config.fmpp</font></code> is:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">inheritConfiguration: common.fmpp
...
freemarkerLinks: {
    a: c:/user/fm/libs2
    b: [inc3, inc4]
    c: foo
}
...<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>then the resulting setting value is equivalent with:</p>

<div align="left"><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="0" border="0"><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td><table bgcolor="#FFFFFF" cellspacing="0" cellpadding="4" border="0" width="100%" style="margin: 0px"><tr><td><pre style="margin: 0px">freemarkerLinks: {
    a: [c:/user/fm/libs2, c:/user/fm/libs1]
    b: [inc3, inc4, inc1, inc2]
    c: foo
}<span style="font-size: 1pt"> </span></pre></td></tr></table></td><td width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr><tr valign="top"><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td><td height="1" width="1" bgcolor="black"><img src="img/none.gif" width="1" height="1" alt="" hspace="0" vspace="0" border="0"></td></tr></table></div>
<p>Note that the name of the links doesn't start with <code><font color="#017D01">@</font></code>; the <code><font color="#017D01">@</font></code> is used only to refer to the links. To protect users from mistakes regarding this, it is not allowed to start a link name with <code><font color="#017D01">@</font></code>.</p>



<a name="objectWrapping"></a>
     <h2><font color="#000000">Object wrapping</font></h2>
<a name="key_objectWrapper"></a>
  <p>
    <i>Name:</i> <b>objectWrapper</b><br>
    <i>Type:</i> string (BeanShell expression)<br>
    <i>Default:</i> <code><font color="#017D01">&quot;ow = new BeansWrapper(); ow.setSimpleMapWrapper(true); return ow;&quot;</font></code><br>
  </p>

<p>The <code><font color="#20C000">objectWrapper</font></code> setting is for FreeMarker "experts" who want to use a customized <code><font color="#017D01">ObjectWrapper</font></code>. The value of the setting is a BeanShell expression that must result in an object whose class extends the <code><font color="#017D01">freemarker.ext.beans.BeansWrapper</font></code> class. The value can be a simple expression like <code><font color="#017D01">"new com.example.MyWrapper()"</font></code>, or multiple instructions ending with a return statement like in the default value above.</p>

<p>The <code><font color="#017D01">freemarker.template.ObjectWrapper</font></code> and <code><font color="#017D01">freemarker.ext.beans.BeansWrapper</font></code> classes are automatically imported, so you don't have to use full-qualified class name for them.</p>

<p>The <code><font color="#017D01">ObjectWrapper</font></code> is created before any other setting values (or the <code><font color="#017D01">fmpp.Engine</font></code> instance for that mater), so the BeanShell expression has no access to any setting values.</p>



<a name="templateSyntax"></a>
     <h2><font color="#000000">Template syntax</font></h2>
<a name="key_tagSyntax"></a>
  <p>
    <i>Name:</i> <b>tagSyntax</b><br>
    <i>Type:</i> string<br>
    <i>Default:</i> <code><font color="#017D01">angleBracket</font></code> with FreeMarker 2.3.x, <code><font color="#017D01">autoDetect</font></code> with later versions<br>
  </p>

<p>The <code><font color="#20C000">tagSyntax</font></code> setting determines the syntax of the templates (angle bracket syntax like <code><font color="#017D01">&lt;#include "foo"></font></code> VS square bracket syntax like <code><font color="#017D01">[#include "foo"]</font></code>) that has no <code><font color="#017D01">ftl</font></code> directive in it. If the template uses <code><font color="#017D01">ftl</font></code> directive (like it starts with <code><font color="#017D01">&lt;#ftl></font></code> or <code><font color="#017D01">[#ftl]</font></code>), then the syntax of the <code><font color="#017D01">ftl</font></code> tag determines the syntax of the template, and the <code><font color="#20C000">tagSyntax</font></code> setting is ignored.</p>

<p>The possible values of this setting are <code><font color="#017D01">angleBracket</font></code>, <code><font color="#017D01">squareBracket</font></code> and <code><font color="#017D01">autoDetect</font></code>. The recommended value is <code><font color="#017D01">autoDetect</font></code>, which will auto-detect the syntax of each template independently, by choosing the syntax of the first FreeMarker tag in the template. For example when it finds a <code><font color="#017D01">[@</font></code> in the template, it will choose square bracket syntax.</p>




    
    <p>
    <table border=0 cellspacing=0 cellpadding=0 width="100%">
  <tr><td  height=1 bgcolor="#000000"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td  height=1 bgcolor="#808080"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td  height=1 bgcolor="#C0C0C0"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td  height=1 bgcolor="#E0E0E0"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
  <tr><td  height=1 bgcolor="#F0F0F0"><img src="img/none.gif" width=1 height=1 alt=""></td></tr>
    </table>
    <table border=0 cellspacing=4 cellpadding=0 width="100%">
      <tr>
        <td valign="top" align="right">
          <table border=0 cellspacing=0 cellpadding=0 width="100%">
            <tr>
              <td align="left" valign="top"><a href="details.html"><img alt="Prev" src="img/prev.png" border="0" width="44" height="44"></a>&nbsp;&nbsp;<a href="configfile.html"><img alt="Next" src="img/next.png" border="0" width="44" height="44"></a>&nbsp;&nbsp;<a href="manual.html"><img alt="Contents" src="img/contents.png" border="0" width="44" height="44"></a>&nbsp;&nbsp;<a href="index.html"><img alt="Home" src="img/home.png" border="0" width="39" height="44"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="reportbug.html"><img alt="Report bug" src="img/reportbug.png" border="0" width="90" height="40"></a>&nbsp;&nbsp;</td>
              <td align="right" valign="top">
                <i>
                  Generated&nbsp;on&nbsp;Mar 15, 2009 06:17 PM GMT<br>
                  For&nbsp;FMPP&nbsp;version&nbsp;0.9.14
                </i>
              </td>
            </tr>
          </table>
        </td>
      <tr>
<td valign="middle" align="right"><a href="http://sourceforge.net"><img alt="SourceForge Logo" src="img/sflogo.png" border="0" width="88" height="31"></a>&nbsp;&nbsp;<a href="http://freemarker.org"><img alt="Powered by FreeMarker" src="img/poweredby_sq_simple.png" border="0" width="88" height="31"></a></td>      </tr>
    </table>
  </body>
  </html>
