<@page title="Installing" keywords="installing, install, setup">

<@sect title="Warning!">
<p>Please understand that FMPP, as a bulk file processor, may generates high amount of output files, and <@e>overwrites all files</@> with the same names as the names of output files without warning. It's a practical decision comes from the usage pattern of the tool. So watch where will the output files go.</p>

<p>Also note that, according <@a href="license.html">the license</@a> (BSD), the author does not take responsibly if the usage of FMPP causes harm for you somehow.</p>
</@sect>

<@sect title="Pre-requirements">
<ul>
  <li>Java must be installed on your machine (Java2 platform Standard Edition 1.2 or later). Sun's free implementation can be downloaded here: <a href="http://java.sun.com/j2se/">http://java.sun.com/j2se/</a>. Download J2SE JRE there (or if you have J2SE JDK, that includes the JRE, so that's good as well). Note that Java is available for various platforms (Windows, "Linux", Mac, etc.), so FMPP works on many platforms.
  <li>If you want to use the FMPP Ant task, you need Ant 1.5.1 or later. If you don't know what's Ant then don't worry, you will not need it.
</ul>
</@sect>

<@sect title="Extracting">
<p>Extract the downloaded archive file (<@c>fmpp_<@r>X</@r>.<@r>X</@r>.<@r>X</@r>.tar.gz</@c> or <@c>fmpp_<@r>X</@r>.<@r>X</@r>.<@r>X</@r>.zip</@c>) into the directory where you prefer to store FMPP. For Windows users it is typically <@c>C:\fmpp</@> or  <@c>C:\Program Files\fmpp</@>, for UN*X users it is typically <@c>~/opt/fmpp</@> or <@c>/opt/fmpp</@> (where <@c>fmpp</@c> is the extracted <@c>fmpp_<@r>X</@r>.<@r>X</@r>.<@r>X</@r></@c> directory after renaming). From now I will refer to this directory as <@c><@r>&lt;FMPP></@></@>.</p>

<p>

</@sect>

<@sect title="Setup the command-line tool" anchor="commandLineTool">

<@sect title="Windows (95/98/Me, NT/2000/XP, ...etc.)">

<p>Quickly and simply: If you have unpacked FMPP into the <@c>C:\Program Files\fmpp</@c> (or <@c>C:\Programme\fmpp</@c>) or the <@c>C:\fmpp</@c> directory, then just copy <@c><@r>&lt;FMPP></@>\bin\fmpp.bat</@c> into <@c>C:\Windows</@c> (if that's the Windows directory on your installation... some systems use <@c>C:\WinNT</@c> or <@c>C:\Win_ME</@c>). Now you can use the <@c>fmpp</@c> command in the command-line anywhere. That's all.</p>

<p>Note the <@c>java.exe</@c> (this comes with Java) must be in the path, or the <@c>JAVA_HOME</@c> environment variable must be correctly set. Otherwise <@c>fmpp.bat</@c> will fail when it tries to invoke <@c>java.exe</@c>.

<p><i>If the above was not good for you, or you run into some problems, then read on...</i></p>

<p>To run FMPP from command-line, execute <@c><@r>&lt;FMPP></@>\bin\fmpp.bat</@>. You should put the <@c><@r>&lt;FMPP></@>\bin</@> into the path, so you can issue an <@c>fmpp</@> command from anywhere. Or, just drop <@c>fmpp.bat</@c> into a directory which is already in the path (say, into the Windows directory), if <@c><@r>&lt;FMPP></@></@> is <@c><@r>&lt;SystemDrive></@r>:\fmpp</@> or <@c><@r>&lt;SystemDrive></@r>:\Progra<@r>&lt;AnythingLongerThan2Characters></@r>\fmpp</@> (e.g. <@c>C:\Program Files\fmpp</@>). 

<p>For those of you who don't know how to set the path: To set the path in Windows NT/2K/XP, use Control Panel/System/Advanced/Environment variables, and edit the <@c>PATH</@c> variable (upper/lower-case differences doesn't matter). To set the path in Win9x, add line <br>
<@c>set PATH=%PATH%;<@r>&lt;FMPP></@r>\bin</@c><br>
to the end of <@c>C:\autoexec.bat</@c>. You should restart Windows if the changes do not take effect.</p>

<p>Because of the limitations of <@c>.bat</@c> files, you may get error messages as 
"The input line is too long.". To solve this, install FMPP in a more "shallow" directory, so that the path to the FMPP related files is shorter.</p>

<p><b>Windows 95/98/Me users please note</b>: Because of the deficiencies of the shell, there are limitations regarding <@c>fmpp.bat</@c>:
<ul>
  <li><@c><@r>&lt;FMPP></@r></@c> must be <@c>C:\fmpp</@> or  <@c>C:\Progra<@r>&lt;AnythingLongerThan2Characters></@r>\fmpp</@>, or you have to set the <@c>FMPP_HOME</@c> environment variable to point to <@c><@r>&lt;FMPP></@r></@c>. You can set environment variables in the same way as <@c>PATH</@c> above (since <@c>PATH</@c> is an environment variable too).
  <li>If you set some environment variables (such as <@c>FMPP_HOME</@c>): the path stored by the environment variable can't contain spaces. Also, the <@c>FMPP_HOME</@c> can't contain directory names longer than 8 characters, so instead of <@c>C:/Progidamina/fmpp</@c> you have to write something like <@c>C:/PROGID~1/fmpp</@c>, that is, you have to use the DOS 8.3 equivalent of the long names. 
  <li>It can happen that the size of "environment" that Windows gives be default is too small. In this case <@c>fmpp.bat</@c> will print error messages about the "environment", and probably will malfunction. To solve this, please add this line to the <@c>config.sys</@c>:
  <br><@c>SHELL=C:\COMMAND.COM /E:4096 /P</@c>
  <br>or find the Microsoft Knowledge Base artice with title "Out of Environment Space Error Message in MS-DOS Programs" (KB230205) on the Internet. 
</ul> 

<p>Anybody contributes with a good convenient installer ("setup.exe" built with Install Shield Wizard or something) is welcome.</p>

</@sect>

<@sect title="UN*X (Linux, FreeBSD, Solaris, Mac OS X, ...etc.)">
<p>To run FMPP from command-line, execute <@c><@r>&lt;FMPP></@>/bin/fmpp</@>.
You may want to create a soft link in a directory that is in the common <@c>PATH</@c>, such as <@c>/bin</@c>, so users can issue an <@c>fmpp</@> command from anywhere:<br>
<@c>ln -s <@r>&lt;FMPP></@>/bin/fmpp /bin/fmpp</@c>
</@sect>

<@sect title="Other operation systems">
  <p>Unfortunatelly, there is no shell script written for you. But you can still use the command-line tool. You will have to execute <@c><@r>&lt;FMPP></@r>/lib/fmpp.jar</@c> with Java. Please refer to the documentation of the Java implementation you are using for more details. If it can't execute <@c>jar</@c>-s, then you have to execute the <@c>fmpp.tools.CommandLine</@> class with Java. For this, <@c><@r>&lt;FMPP></@r>/lib/fmpp.jar</@c> must be in the so called "class path". Again, please refer to the documentation of the Java implementation you are using.</p>
</@sect>

<@sect title="Notes for all operating systems">
<ul>
  <li>The <@c>JAVA_HOME</@> environment variable must be correctly set, or <@c>java.exe</@c> (<@c>java</@c> on UN*X) must be in the <@c>PATH</@c>.</li>
  <li>You can move <@c>fmpp.bat</@c> or (<@c>fmpp</@c> on UN*X) into any directory.</li>
  <li>You can move the jars into the <@c>lib</@c> subdirectory of Ant (if you want to use the Ant task anyway). If you do this, the command line tool need Ant be installed on a "standard" location (like <@c>C:\Program Files\ant</@c>), or <@c>ANT_HOME</@c> must be correctly set.</li>
  <li>If these shell scripts are not good for you somehow, just call the <@c>fmpp.tools.CommandLine</@> class with <@c>java</@>; of course <@c>fmpp.jar</@c>, and optional jars/classes (if any) and extension jars/classes (if any) must be in the <@c>CLASSPATH</@>. Also, at least with Sun's Java implementations, you can run <@c>fmpp.jar</@c> directly with <@c>java -jar <@r>&lt;FMPP></@>/lib/fmpp.jar</@>.</li>
</ul>
</@sect>
  
</@sect>


<@sect title="Setup the Ant task">

<p>If you want to use FMPP as Ant task, copy the required jar files from <@c><@r>&lt;FMPP></@>/lib</@> into the <@c>lib</@> directory of your Ant installation (issuing <@c>ant&nbsp;install</@c> from <@c><@r>&lt;FMPP></@></@> will do this for you), or ensure that the jars are in the <@c>CLASSPATH</@> environment variable. Then, whenever you need the FMPP task in a project, add this line to your <@c>build.xml</@c>:</p>

<@prg><taskdef name="fmpp" classname="fmpp.tools.AntTask"/></@prg>

<p>And then you can use the <@c>&lt;fmpp <@r>...</@r>></@> task.
</@sect>


<@sect title="Installing optional parts and custom extensions">

<p>For the command-line tool, simply drop the jar file that contains the required classes into the <@c><@r>&lt;FMPP></@>/lib</@> directory (or, into the Ant <@c>lib</@c> directory, if you store <@c>fmpp.jar</@c> there only). For the Ant task, either ensure that the required jars are in the <@c>CLASSPATH</@c>, or drop the jars into the <@c>lib</@c> directory of your Ant installation.</p>

<p>If you need <b>XML support</b>, you should use J2SE 1.4 or later. If you use earlier Java, then install some JAXP 1.2+/SAX 2.0+/DOM Level 2 implementation with name-space support, for example: <a href="http://xerces.apache.org/">Xerces</a> (recommended) or <a href="http://xml.apache.org/crimson/">Crimson</a>. (Note that Ant comes with Xerces, so when you use the FMPP Ant task, the XML related classes will be available.)</p>
  
<p><b>XPath expressions</b> will work only if <a href="http://jaxen.org/">Jaxen</a> (recommended, use 1.1-beta-8 or later!) or <a href="http://xml.apache.org/xalan/">Apache Xalan</a> classes are available (Xalan was included with Sun J2SE 1.4, but not with 1.5).</p>

</@sect>

<@sect title="Updating FreeMarker" anchor="updatingFreeMarker">

<p>FMPP comes with FreeMarker just for the sake of simplicity. You can replace FreeMarker with a later version as far as it is backward compatible with the version that FMPP comes with. For this, <a href="http://freemarker.org/freemarkerdownload.html">download the latest backward compatible FreeMarker release</a>, and overwrite the <@c><@r>&lt;FMPP></@>/lib/freemarker.jar</@c> with the <@c>lib/freemarker.jar</@c> of the FreeMarker release. (Of course, if you are using the FMPP Ant task, you may need to replace the <@c>freemarker.jar</@c> in the <@c>lib</@c> directory of the Ant installation too.)</p>

</@sect>

</@page>